# Fair Rations
原题见[这里](https://www.hackerrank.com/challenges/fair-rations/problem)
一共有n个人，每个人手里都有大于等于1块面包，你现在要分配面包，必须满足以下条件：
1. 每次发2块，给相邻的两个人。
2. 最后分发结束时，每个人手里都必须是偶数块面包。

给定每个人手里的面包数，问至少需要分发多少块面包，才能满足要求。如果没法满足要求，输出NO

# 分析
假设一开始手里面包数为奇数的人数为t。 每次分发面包时，对于被分发的两个人手中的面包，有如下三种情况：
* 两个人手中都是奇数块面包，则分发后他们手中面包都变成偶数， 即 t减少2.
* 两个人手中都是偶数块面包，则分发后他们手中面包都变奇数，即 t增加2.
* 两个人一奇一偶，则分发后还是一奇一偶， t不变。

所以可以看到， 若一开始t为奇数，而必然无解，可以自己思考下如何用反证法证明。  
对于t为偶数的情况，则一定有解法，下面来说明。  
  
假设面包数数组为a，m和n为两个人的序号，a[m]和a[n]都是奇数。  
则可以通过如下方式发放面包使得m和n手中面包数都变成偶数，且其他人手中面包奇偶性不变。
* 给m和m+1发面包，之后m手中为偶数，m+1手中奇偶性变化。
* 给m+1和m+2发面包，之后m+1手中奇偶性变回来，m+2手中奇偶性变化
......
* 给 m + t和 n - 1发面包，之后m+t手中奇偶性变回来， n - 1手中奇偶性变化。
* 给 n - 1和n 发 面包，之后 n -1手中奇偶性变回来，n手中变为偶数。

则最终m与n手中面包数都变成了偶数，且 m + 1, m + 2, ... m + t.. n - 2, n - 1手中面包数奇偶性不变。

因此对于t为偶数的情况， 假设对应的人序号分别为 k[1], k[2], k[3], ... k[t]，对于任意 1 <= i < t都有 k[i] < k[i+1]。  
则可以将这些人两两组合，用上述方式进行处理，这样最终所有人手中面包都会变成偶数。  
  
一个比较直观的处理方式是： k[1]和k[2]一组, k[3]和k[4]一组, k[5]和k[6]一组.... k[t-1]和k[t]一组，即从左到右，每次都将序号最前的两个进行组合。  
下面要证明这样处理，所发的面包数确实是最少的。  
  
对于m和n的序号，处理所需的面包数为(n - m) * 2，而且必须至少需要这么多。 这个我就不证明了， 思考下 n = m + 1的情况， 再继续考虑下 n = m + 2, n = m+3 ...n = m + 任意数的情况吧。 
   
数学证明里面，有种方法比较常用，什么呢？当然是，数学归纳法。  
t = 2时，这样发放使用的面包数当然是最少的。  
假设t = 2s时， 这样使用的面包数最少。  
对于t = 2s + 2， 对应的人序号分别为 k[1], k[2], k[3], ... k[2s + 2]。 
假设发放面包的方法不是这样， 则k[1]和k[2]不是同一组, 否则， 剩余的 2s个， 从左到右两两组合使用的面包数是最少的， 则形成了同样的处理方式，矛盾。 
假设k[1]与k[m]一组，k[2]与k[n]一组, m和n都大于2。则这两组处理所需的面包数为 (k[m] - k[1] + k[n] - k[2]) * 2。  
下面交换下组， 使 k[1]与k[2]一组， k[m]与k[n]一组。  
* 若 m > n， 则这样两组处理所需面包数为 (k[m] - k[n] + k[2] - k[1]) * 2， 与上面的相减有 (k[m] - k[n] + k[2] - k[1]) * 2 - (k[m] - k[1] + k[n] - k[2]) * 2 = (- 2k[n] + 2k[2]) * 2 < 0
* 右 n > m， 同样交换后再相减得到 (- 2k[m] + 2k[2]) * 2 < 0

即交换分组后发放的面包会更少，矛盾。  

最终得出算法如下：
1. 初始化发放面包数result = 0, 前一个人手中是否是奇数块面包flag = false.
2. 依次遍历每个人。对于每个人：
    * 如果flag = true 前一个人手中是奇数块面包
        * 如果当前人手中也是奇数块面包，给两人发放， result += 2, 设置flag = false
        * 如果当前人手中是偶数块，给两人发放， result += 2， 前一个手中变成了偶数块，但当前人手中变成了奇数块，flag不变。
    * 如果flag = false 前一个人手中是偶数块面包
        * 如果当前人手中也是偶数块， 什么也不做，继续。
        * 如果当前人手中是奇数块， 设置 flag = true.
3. 如果最后flag = true， 表示最后一个人手中是奇数块面包， 无解， 否则，返回result。

具体代码见[solve.php](./solve.php)