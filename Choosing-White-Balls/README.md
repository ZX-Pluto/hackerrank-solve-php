# Choosing White Balls
原题见[这里](https://www.hackerrank.com/challenges/choosing-white-balls/problem)

n个小球排成一排，每个小球为黑色B或白色W，现在做k次取球的操作，目标是使得取到的白球数最多。对于第i次取球的操作(1 <= i <= k):
1. 随机选择一个数x，1 <= x <= 当前剩余小球数。
2. 将第x个小球取出，从前往后或从后往前数都可以，并且不再放回。

在每一次取球时，你会选择最优的取法，以保证最终取得的白球数最多。

给定初始小球分布以及k，问在最优取法的情况下，能够取得的白球数的期望值是多少。

# 分析
这道题其实从动态规划的角度上来说并没有特别难，用二进制数表示当前小球的颜色情况，每一位0代表黑色，1代表白色。

令dynamic(colors, t)表示在颜色分布colors的情况下，取t个小球能够取得的白球期望值。则有：
1. 若t = 0，返回0。没得取了自然是0.
2. 否则，令result = 0令n = 目前剩余小球数，对于i, 从1到n:
    * result加上从前往后取第i个小球再继续取，和从后往前取第i个小球再继续取，两者期望值的较大者。
3. 返回result / n

但是实际过程中，我做了如下优化：
1. 对于某个颜色分布，如果将其前后翻转一下，得到的结果应该是一样的，因为每一步都可以从前或从后取，翻转与否，最优取法应该是相同的。
2. 上面第2步中，同样有这样的对称关系，即决定怎么取第i个球和决定怎么取第n- i -1个球，两者的最优选择也是相同的。
3. PHP直接全部用二维缓存，内存会超，需要将一部分用SplFixedArray进行一维缓存。

具体代码见[solve.php](./solve.php)