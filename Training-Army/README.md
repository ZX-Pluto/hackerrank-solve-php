# Training the army
原题见[这里](https://www.hackerrank.com/challenges/training-the-army/problem)

有中文，就不翻译了。

# 分析

这个题目，当然是用最大流。关于最大流的介绍，之前的题目中已经有了，见[这里](../Real-Estate-Broker)

对比了自己跟编辑的答案后，发现自己的图构造得有点复杂，但是，不管怎样，先讲讲我自己的构造方式吧，尽管复杂，但并没有错啊，也没有超时。

首先，对于已经有人拥有的技能，留下1个人不转化，减少占用的转化处理。

除了默认的源点和汇点之外，对每种技能，都有一个汇总源点和汇总汇点。汇总源点用来给每个巫师输送要进行转化的技能，而汇总汇点用来给汇点输送流量，表示“该技能有人拥有了”。

对于技能i，假设对应汇总源点为s[i]，对应汇总汇点为t[i]。则：
* 若拥有技能i的人数大于1，则建立源点 -> s[i] 的边，容量为(拥有技能i的人数 - 1)
* 若没有人拥有技能i，则建立 t[i] -> 汇点 的边，容量为1，表示希望能转化出此技能。

对于每位巫师的两个列表A和B, A中的每个技能j，对应一个点a[j], B中的每个技能k，对应一个点b[k]。则：
* 建立s[j] -> a[j]的边，容量为1， 表示可以有一次转化输入。
* 建立b[k] -> t[k]的边，容量为1， 表示可以输出一次转化至汇总输出。
* 建立b[k] -> s[k]的边，容量为1， 表示可以转出一次转化继续后续转化。
* 对每个j和每个k，如果j != k，建立a[j] -> b[k]的边，容量为1，表示进行一次转化。自己转化成自己没啥意义，所以忽略。

然后从源点开始跑最大流，最大流的流量加上一开始已经拥有的技能数量，就是最后能够获得的不同技能数了。

具体代码见[solve-my.php](./solve-my.php)

然后，看了编辑给的答案，构建的图比我的简单多了，不需要拆点，也不需要汇总源点和汇总汇点。而是除源汇点之外，每个技能用一个点表示，每个巫师用一个点表示。

假设技能i对应的点为c[i]，则：
* 建立源点 -> c[i]的边，容量为技能i对应初始人数。
* 建立c[i] -> 汇点的边，容量为1。

假设巫师j对应的点为d[j]。对于巫师j的两个列表A和B：
* 对于A中的每个技能k, 建立c[i] -> d[j]的边，容量为1.
* 对于B中的每个技能l, 建立d[j] -> c[l]的边，容量为1.

然后跑最大流就好。

具体代码见[solve.php](./solve.php)
